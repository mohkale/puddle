<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>client/models/fields.ts - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Classes</li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="module.html#.exports">exports</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module.html#.exports#recentlyActiveTorrents">recentlyActiveTorrents</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module.html#.exports#request">request</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module.html#.exports#requestInit">requestInit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module.html#.exports#serialise">serialise</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module.html#.exports#setSession">setSession</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module.html#.exports#torrent">torrent</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Updater.html">Updater</a></span></li><li class="nav-heading">Interfaces</li><li class="nav-heading"><span class="nav-item-type type-interface">I</span><span class="nav-item-name"><a href="ColumnResizeContext.html">ColumnResizeContext</a></span></li><li class="nav-heading"><span class="nav-item-type type-interface">I</span><span class="nav-item-name"><a href="Config.html">Config</a></span></li><li class="nav-heading"><span class="nav-item-type type-interface">I</span><span class="nav-item-name"><a href="ContextType.html">ContextType</a></span></li><li class="nav-heading"><span class="nav-item-type type-interface">I</span><span class="nav-item-name"><a href="DashboardTableColumnsProps.html">DashboardTableColumnsProps</a></span></li><li class="nav-heading"><span class="nav-item-type type-interface">I</span><span class="nav-item-name"><a href="SessionType.html">SessionType</a></span></li><li class="nav-heading"><span class="nav-item-type type-interface">I</span><span class="nav-item-name"><a href="Torrent.html">Torrent</a></span></li><li class="nav-heading"><span class="nav-item-type type-interface">I</span><span class="nav-item-name"><a href="TransmissionTorrent_Mutable.html">TransmissionTorrent_Mutable</a></span></li><li class="nav-heading"><span class="nav-item-type type-interface">I</span><span class="nav-item-name"><a href="TransmissionTorrent_WriteOnly.html">TransmissionTorrent_WriteOnly</a></span></li><li class="nav-heading"><a href="global.html">Globals</a></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#ansiStripFormat">ansiStripFormat</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#authenticate">authenticate</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#authenticated">authenticated</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#constructFileTree">constructFileTree</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#CORNER_OFFSET">CORNER_OFFSET</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#cyclePriority">cyclePriority</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#dirNames">dirNames</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#ESSENTIAL_FIELDS">ESSENTIAL_FIELDS</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#fromSerialised">fromSerialised</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#isPriorityType">isPriorityType</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#NetworkIndicatorStats">NetworkIndicatorStats</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#notificationIdGen">notificationIdGen</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#NotificationTypes">NotificationTypes</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#onSubmitGeneral">onSubmitGeneral</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#OverlayType">OverlayType</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#prepareFiles">prepareFiles</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#PRIORITY_CLASSES">PRIORITY_CLASSES</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#PRIORITY_LABELS">PRIORITY_LABELS</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#puddleShrinkLevelFormat">puddleShrinkLevelFormat</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#QUERY_SET_TIMEOUT">QUERY_SET_TIMEOUT</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#reduceMapping">reduceMapping</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#selectFilteredTorrents">selectFilteredTorrents</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#selectTorrentsMatchingClassPredicate">selectTorrentsMatchingClassPredicate</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#selectTorrentsMatchingLabelsPredicate">selectTorrentsMatchingLabelsPredicate</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#selectTorrentsMatchingQueryPredicate">selectTorrentsMatchingQueryPredicate</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#selectTorrentsMatchingTrackersPredicate">selectTorrentsMatchingTrackersPredicate</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#selectTorrentsSearchIndex">selectTorrentsSearchIndex</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#serverPromise">serverPromise</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setDifference">setDifference</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setPartition">setPartition</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#StartStopButtons">StartStopButtons</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#syncTorrents">syncTorrents</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#TORRENT_BASE">TORRENT_BASE</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#torrentClass">torrentClass</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#torrentClasses">torrentClasses</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#torrentComparators">torrentComparators</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#TorrentFields">TorrentFields</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#torrentFromResponse">torrentFromResponse</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#torrentIdsToParam">torrentIdsToParam</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#torrentRangeSelected">torrentRangeSelected</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#torrentsAdded">torrentsAdded</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#torrentSelected">torrentSelected</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#torrentSelector">torrentSelector</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#torrentsRemoved">torrentsRemoved</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#torrentsUpdated">torrentsUpdated</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#treeTraverse">treeTraverse</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#updateRecentlyActiveTorrents">updateRecentlyActiveTorrents</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#URLInput">URLInput</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#validateForm">validateForm</a></span></li>
</nav>

<div id="main">
    
    <h1 class="page-title">client/models/fields.ts</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * A field is some attribute calculated from a torrent instance
 * that represents a relevent piece of information about the torrent.
 * Theses fields will be presented to the user as columns on the
 * dashboard.
 */

import { Torrent } from './torrent';

/**
 * The complete set of fields the user can be shown on the dashboard.
 * A subset of these will commonly be presented and the user retains.
 */
export enum TorrentFields {
  QUEUE_POSITION,
  NAME,
  PROGRESS,
  DOWNLOADED,
  DOWNLOAD_SPEED,
  UPLOADED,
  UPLOAD_SPEED,
  ETA,
  RATIO,
  FILE_SIZE,
  ADDED,
  TAGS,
  COMPLETED_DATE,
}

/**
 * The fields that can NEVER be disabled.
 *
 * If you could remove every field from the dashboard, then
 * what is the dashboard even showing?
 */
export const ESSENTIAL_FIELDS = [TorrentFields.NAME] // eslint-disable-line @typescript-eslint/no-unused-vars

type Comparers = (a: Torrent, b: Torrent) => number

/**
 * Used for sorting torrents on the dashboard.
 *
 * Each of these should be a function that compares two torrent instances
 * and returns either +ve, -ve or 0 to indicate precedence based on the
 * given field. For more information see [[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort][Array.prototype.sort]].
 */
export const torrentComparators: { [key in TorrentFields]: Comparers } = {
  // simple field by field comparisons across different torrents.
  [TorrentFields.QUEUE_POSITION]: (a, b) => b.queuePosition - a.queuePosition,
  [TorrentFields.NAME]:           (a, b) => b.name.localeCompare(a.name),
  [TorrentFields.PROGRESS]:       (a, b) => a.percentDone    - b.percentDone,
  [TorrentFields.DOWNLOADED]:     (a, b) => a.downloadedEver - b.downloadedEver,
  [TorrentFields.DOWNLOAD_SPEED]: (a, b) => a.rateDownload   - b.rateDownload,
  [TorrentFields.UPLOADED]:       (a, b) => a.uploadedEver   - b.uploadedEver,
  [TorrentFields.UPLOAD_SPEED]:   (a, b) => a.rateUpload     - b.rateUpload,
  [TorrentFields.RATIO]:          (a, b) => a.uploadRatio    - b.uploadRatio,
  [TorrentFields.FILE_SIZE]:      (a, b) => a.sizeWhenDone   - b.sizeWhenDone,
  [TorrentFields.ADDED]:          (a, b) => a.addedDate      - b.addedDate,

  // TODO always sort incomplete torrents at the bottom, regardless of
  // ascending or descending.
  [TorrentFields.COMPLETED_DATE]: (a, b) => a.doneDate       - b.doneDate,

  // TODO maybe we can come up with a better comparison metric here.
  [TorrentFields.TAGS]: (a, b) => a.labels.length  - b.labels.length,

  [TorrentFields.ETA]: (a, b) => {
    if (a.eta === b.eta) {
      return 0
    } else if (a.eta &lt; 0) {
      return -1
    } else if (b.eta &lt; 0) {
      return +1
    } else {
      return a.eta - b.eta
    }
  },
}
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.4</a> on Tue Sep 08 2020 20:04:26 GMT+0000 (Coordinated Universal Time) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
